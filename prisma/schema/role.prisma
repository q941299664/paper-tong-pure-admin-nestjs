model Role {
  id          Int        @id @default(autoincrement())
  code        String     @unique @db.VarChar(20)
  name        String     @unique @db.VarChar(20)
  description String?    @db.VarChar(100)
  createTime  DateTime   @default(now())
  updateTime  DateTime   @updatedAt
  users       UserRole[]
  apis        RoleApi[]
  menus       RoleMenu[]
}

model RoleMenu {
  id         Int      @id @default(autoincrement())
  roleId     Int
  menuId     Int
  createTime DateTime @default(now())
  menu       Menu     @relation(fields: [menuId], references: [id], onDelete: Cascade)
  role       Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@unique([roleId, menuId])
}

model RoleApi {
  id         Int      @id @default(autoincrement())
  roleId     Int
  apiId      Int
  createTime DateTime @default(now())
  api        Api      @relation(fields: [apiId], references: [id], onDelete: Cascade)
  role       Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@unique([roleId, apiId])
}
